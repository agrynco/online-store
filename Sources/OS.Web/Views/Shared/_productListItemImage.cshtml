@using OS.Business.Domain
@model Product

@{
    string productImageSrc = "http://placehold.it/400x250/000/fff";

    Photo mainPhoto = Model.Photos.SingleOrDefault(x => x.IsMain);

    mainPhoto = mainPhoto ?? Model.Photos.FirstOrDefault();

    if (mainPhoto != null)
    {
        productImageSrc = Url.Action("GetWhaterMarkedPhoto", "Files", new
            {
                id = mainPhoto.Id
            });
    }
}

<img class="cbp-vm-image" src="@productImageSrc" alt=""/>